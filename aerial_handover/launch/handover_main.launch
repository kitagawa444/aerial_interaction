<launch>

    <!-- DRAGON / Gazebo のモード切り替え -->
    <!-- 今はシミュレーションだけ使うので rm のデフォルトは False にしておく -->
    <arg name="rm" default="False" />
    <arg name="sim" default="True" />
    <!-- Gazebo の GUI を出すかどうか -->
    <arg name="headless" default="False" />
    <!-- 手の位置のソース：marker or mocap -->
    <arg name="hand_source" default="marker" />

    <!-- =====================================
       DRAGON + Gazebo + 目・手モデル (task)
       ===================================== -->
    <include file="$(find aerial_handover)/launch/task.launch">
        <arg name="rm" value="$(arg rm)" />
        <arg name="sim" value="$(arg sim)" />
        <arg name="headless" value="$(arg headless)" />
        <arg name="hand_source" value="$(arg hand_source)" />
    </include>

    <node pkg="aerial_handover" type="pose_transformer.py" name="pose_transformer" output="screen">
        <param name="handover_dis_x" value="0.2" />
        <param name="handover_dis_z" value="0.2" />
        <param name="handover_pitch" value="0.2" />
        <remap from="/desired_3D_pose" to="/hand_pose" />
    </node>

    <!-- ======================
       mocap → handターゲット
       hand_source が mocap のときだけ動かす
       ====================== -->
    <!-- <node pkg="aerial_handover" type="mocap_to_hand_target.py" name="mocap_to_hand_target" output="screen" if="$(eval arg('hand_source') == 'mocap')" /> -->

</launch>
